<style>
  :root{
    --bg:#f5f6f8;
    --card:#ffffff;
    --text:#111827;
    --muted:#6b7280;
    --border:#e5e7eb;
    --shadow: 0 6px 16px rgba(17,24,39,.08);
    --primary:#2563eb;
    --good:#16a34a;
    --warn:#d97706;
    --skip:#9ca3af;
  }
  *{box-sizing:border-box;}
  body{
    margin:0;
    font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    background:var(--bg);
    color:var(--text);
  }

  .topbar{
    position:sticky; top:0; z-index:10;
    background:rgba(255,255,255,.92);
    backdrop-filter: blur(8px);
    border-bottom:1px solid var(--border);
    padding:12px 14px;
    display:flex;
    gap:12px;
    align-items:center;
    justify-content:space-between;
  }
  .brand-title{font-weight:800; letter-spacing:.2px;}
  .brand-sub{font-size:12px; color:var(--muted); margin-top:2px;}
  .tabs{display:flex; gap:8px;}
  .tab{
    border:1px solid var(--border);
    background:#fff;
    padding:10px 12px;
    border-radius:12px;
    min-width:72px;
    font-weight:650;
    cursor:pointer;
  }
  .tab.active{
    border-color:rgba(37,99,235,.35);
    background:rgba(37,99,235,.08);
    color:var(--primary);
  }

  .container{padding:14px; max-width:900px; margin:0 auto;}
  .view{padding-bottom:80px;}
  .hidden{display:none;}

  .day{
    margin:14px 0;
  }
  .day-header{
    display:flex; align-items:center; justify-content:space-between;
    margin-bottom:10px;
  }
  .day-title{font-size:16px; font-weight:800;}
  .day-sub{font-size:12px; color:var(--muted);}

  .slot{
    margin-top:10px;
    padding:10px;
    border:1px solid var(--border);
    border-radius:16px;
    background:rgba(255,255,255,.6);
  }
  .slot-title{
    display:flex; align-items:center; justify-content:space-between;
    font-weight:800;
    margin-bottom:8px;
  }

  .card{
    background:var(--card);
    border:1px solid var(--border);
    border-radius:16px;
    padding:12px;
    box-shadow: var(--shadow);
    display:flex;
    gap:12px;
    align-items:flex-start;
    margin:10px 0;
  }
  .pill{
    font-size:12px;
    padding:6px 10px;
    border-radius:999px;
    border:1px solid var(--border);
    background:#fff;
    white-space:nowrap;
  }
  .meta{flex:1; min-width:0;}
  .title{font-weight:850; line-height:1.15;}
  .sub{color:var(--muted); font-size:13px; margin-top:4px;}
  .note{color:var(--muted); font-size:12px; margin-top:8px;}
  .note.trunc{
    display:-webkit-box;
    -webkit-line-clamp:2;
    -webkit-box-orient:vertical;
    overflow:hidden;
  }

  .actions{display:flex; flex-direction:column; gap:8px;}
  .btn{
    border:1px solid var(--border);
    background:#fff;
    padding:10px 12px;
    border-radius:14px;
    font-weight:750;
    cursor:pointer;
    min-width:88px;
  }
  .btn.primary{background:var(--primary); border-color:var(--primary); color:#fff;}
  .btn.ghost{background:#fff;}
  .btn:disabled{opacity:.6; cursor:not-allowed;}

  .statusDot{
    width:10px; height:10px; border-radius:50%;
    display:inline-block; margin-right:8px;
    background:var(--border);
  }
  .status-done{background:var(--good);}
  .status-partial{background:var(--warn);}
  .status-skipped{background:var(--skip);}

  .row{display:flex; gap:12px;}
  .row .field{flex:1;}

  /* Modal */
  .modal-overlay{
    position:fixed; inset:0;
    background:rgba(17,24,39,.45);
    display:flex;
    align-items:flex-end;
    justify-content:center;
    padding:14px;
  }
  .modal{
    width:min(560px, 100%);
    background:#fff;
    border-radius:20px;
    border:1px solid var(--border);
    box-shadow:var(--shadow);
    overflow:hidden;
  }
  .modal-header{
    display:flex; align-items:flex-start; justify-content:space-between;
    padding:14px 14px 8px 14px;
    border-bottom:1px solid var(--border);
  }
  .modal-title{font-weight:900;}
  .modal-meta{font-size:12px; color:var(--muted); margin-top:2px;}
  .icon-btn{
    border:1px solid var(--border);
    background:#fff;
    width:40px; height:40px;
    border-radius:14px;
    cursor:pointer;
  }
  .modal-body{padding:12px 14px;}
  .modal-footer{
    display:flex; gap:10px;
    padding:12px 14px 14px 14px;
    border-top:1px solid var(--border);
    justify-content:flex-end;
  }
  .field{display:flex; flex-direction:column; gap:6px; margin:10px 0;}
  .field span{font-size:12px; color:var(--muted); font-weight:750;}
  input, select, textarea{
    width:100%;
    padding:10px 12px;
    border-radius:14px;
    border:1px solid var(--border);
    font:inherit;
    outline:none;
  }
  input:focus, select:focus, textarea:focus{
    border-color: rgba(37,99,235,.55);
    box-shadow: 0 0 0 4px rgba(37,99,235,.12);
  }

  /* Toast */
  .toast{
    position:fixed;
    left:50%;
    bottom:18px;
    transform:translateX(-50%);
    background:#111827;
    color:#fff;
    padding:10px 14px;
    border-radius:14px;
    font-weight:700;
    box-shadow: var(--shadow);
  }

  /* Week totals */
  .totals{
    display:flex;
    flex-wrap:wrap;
    gap:10px;
    margin:10px 0 16px 0;
  }
  .kpi{
    background:#fff;
    border:1px solid var(--border);
    border-radius:16px;
    padding:12px;
    box-shadow: var(--shadow);
    min-width: 180px;
  }
  .kpi .k{font-size:12px; color:var(--muted); font-weight:750;}
  .kpi .v{font-size:20px; font-weight:900; margin-top:2px;}
</style>
